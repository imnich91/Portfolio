!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ariaTabPanel=e()}}(function(){return function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";t.exports={Tab:e(2),TabList:e(3),TabPanel:e(4),Wrapper:e(5)}},{2:2,3:3,4:4,5:5}],2:[function(e,t,r){"use strict";var i=e("react"),n=e(7),o={children:i.PropTypes.oneOfType([i.PropTypes.node,i.PropTypes.func]).isRequired,id:i.PropTypes.string.isRequired,tag:i.PropTypes.string,index:i.PropTypes.number,active:i.PropTypes.bool,letterNavigationText:i.PropTypes.string};t.exports=i.createClass({displayName:"AriaTabPanel-Tab",propTypes:o,getDefaultProps:function(){return{tag:"div"}},contextTypes:{atpManager:i.PropTypes.object.isRequired},getInitialState:function(){return{isActive:this.context.atpManager.memberStartsActive(this.props.id)||!1}},handleFocus:function(){this.context.atpManager.handleTabFocus(this.props.id)},updateActiveState:function(e){this.setState({isActive:e})},registerWithManager:function(e){this.isRegistered||(this.isRegistered=!0,this.context.atpManager.registerTab({id:this.props.id,node:e,update:this.updateActiveState,index:this.props.index,letterNavigationText:this.props.letterNavigationText}))},render:function(){var e=this.props,t=void 0===e.active?this.state.isActive:e.active,r=function(){return"function"==typeof e.children?e.children({isActive:t}):e.children}(),a={id:e.id,tabIndex:t?0:-1,onClick:this.handleClick,onFocus:this.handleFocus,role:"tab","aria-selected":t,"aria-controls":this.context.atpManager.getTabPanelId(e.id),ref:this.registerWithManager};return n(a,e,o),i.createElement(e.tag,a,r)}})},{7:7,react:"react"}],3:[function(e,t,r){"use strict";var i=e("react"),n=e(7),o={children:i.PropTypes.node.isRequired,tag:i.PropTypes.string};t.exports=i.createClass({displayName:"AriaTabPanel-TabList",propTypes:o,getDefaultProps:function(){return{tag:"div"}},render:function(){var e=this.props,t={role:"tablist"};return n(t,e,o),i.createElement(e.tag,t,e.children)}})},{7:7,react:"react"}],4:[function(e,t,r){"use strict";var i=e("react"),n=e(7),o={children:i.PropTypes.oneOfType([i.PropTypes.node,i.PropTypes.func]).isRequired,tabId:i.PropTypes.string.isRequired,tag:i.PropTypes.string,active:i.PropTypes.bool};t.exports=i.createClass({displayName:"AriaTabPanel-TabPanel",propTypes:o,getDefaultProps:function(){return{tag:"div"}},contextTypes:{atpManager:i.PropTypes.object.isRequired},getInitialState:function(){return{isActive:this.context.atpManager.memberStartsActive(this.props.tabId)||!1}},handleKeyDown:function(e){e.ctrlKey&&"ArrowUp"===e.key&&(e.preventDefault(),this.context.atpManager.focusTab(this.props.tabId))},updateActiveState:function(e){this.setState({isActive:e})},registerWithManager:function(e){this.isRegistered||(this.isRegistered=!0,this.context.atpManager.registerTabPanel({node:e,update:this.updateActiveState,tabId:this.props.tabId}))},render:function(){var e=this.props,t=void 0===e.active?this.state.isActive||!1:e.active,r="function"==typeof e.children?e.children({isActive:t}):e.children,a=e.style||{};t||(a.display="none");var s={className:e.className,id:this.context.atpManager.getTabPanelId(e.tabId),onKeyDown:this.handleKeyDown,role:"tabpanel",style:a,"aria-hidden":!t,"aria-describedby":e.tabId,ref:this.registerWithManager};return n(s,e,o),i.createElement(e.tag,s,r)}})},{7:7,react:"react"}],5:[function(e,t,r){"use strict";var i=e("react"),n=e(6),o=e(7),a={children:i.PropTypes.node.isRequired,activeTabId:i.PropTypes.string,letterNavigation:i.PropTypes.bool,onChange:i.PropTypes.func,tag:i.PropTypes.string};t.exports=i.createClass({displayName:"AriaTabPanel-Wrapper",propTypes:a,getDefaultProps:function(){return{tag:"div"}},childContextTypes:{atpManager:i.PropTypes.object.isRequired},getChildContext:function(){return{atpManager:this.manager}},componentWillMount:function(){this.manager=n({onChange:this.props.onChange,activeTabId:this.props.activeTabId,letterNavigation:this.props.letterNavigation})},componentWillUnmount:function(){this.manager.destroy()},componentDidMount:function(){this.manager.activate()},render:function(){var e=this.props,t={};return o(t,e,a),i.createElement(e.tag,t,e.children)}})},{6:6,7:7,react:"react"}],6:[function(e,t,r){"use strict";function i(e){this.options=e;var t={wrap:!0,forwardArrows:["down","right"],backArrows:["up","left"],stringSearch:e.letterNavigation};this.focusGroup=n(t),this.tabs=[],this.tabPanels=[],this.activeTabId=e.activeTabId}var n=e(8);i.prototype.activate=function(){this.focusGroup.activate()},i.prototype.memberStartsActive=function(e){return this.activeTabId===e?!0:void 0===this.activeTabId?(this.activeTabId=e,!0):!1},i.prototype.registerTab=function(e){void 0===e.index?this.tabs.push(e):this.tabs.splice(e.index,0,e);var t=e.letterNavigationText?{node:e.node,text:e.letterNavigationText}:e.node;this.focusGroup.addMember(t,e.index),this.activateTab(this.activeTabId||e.id)},i.prototype.registerTabPanel=function(e){this.tabPanels.push(e),this.activateTab(this.activeTabId),this.activateTab(this.activeTabId||e.tabId)},i.prototype.activateTab=function(e){if(e!==this.activeTabId){if(this.activeTabId=e,this.options.onChange)return void this.options.onChange(e);this.tabPanels.forEach(function(t){t.update(e===t.tabId)}),this.tabs.forEach(function(t){t.update(e===t.id)})}},i.prototype.handleTabFocus=function(e){this.activateTab(e)},i.prototype.focusTab=function(e){var t=this.tabs.find(function(t){return t.id===e});t&&t.node.focus()},i.prototype.destroy=function(){this.focusGroup.deactivate()},i.prototype.getTabPanelId=function(e){return e+"-panel"},t.exports=function(e){return new i(e)}},{8:8}],7:[function(e,t,r){"use strict";t.exports=function(e,t,r){for(var i in t)t.hasOwnProperty(i)&&(e[i]||r[i]||(e[i]=t[i]))}},{}],8:[function(e,t,r){function i(e){e=e||{},this._settings={forwardArrows:e.forwardArrows||["down"],backArrows:e.backArrows||["up"],wrap:e.wrap,stringSearch:e.stringSearch,stringSearchDelay:800},this._searchString="",this._members=[],e.members&&this.setMembers(e.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}function n(e){return"ArrowUp"===e.key||38===e.keyCode?"up":"ArrowDown"===e.key||40===e.keyCode?"down":"ArrowLeft"===e.key||37===e.keyCode?"left":"ArrowRight"===e.key||39===e.keyCode?"right":null}function o(e){return e>=65&&90>=e}function a(e){e&&e.focus&&(e.focus(),"input"===e.tagName.toLowerCase()&&e.select())}i.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},i.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},i.prototype._handleKeydownEvent=function(e){var t=this._getActiveElementIndex();if(-1!==t){var r=n(e);return r?-1!==this._settings.forwardArrows.indexOf(r)?(e.preventDefault(),void this.moveFocusForward()):-1!==this._settings.backArrows.indexOf(r)?(e.preventDefault(),void this.moveFocusBack()):void 0:void this._handleNonArrowKey(e)}},i.prototype.moveFocusForward=function(){var e,t=this._getActiveElementIndex();return e=t<this._members.length-1?t+1:this._settings.wrap?0:t,this.focusNodeAtIndex(e),e},i.prototype.moveFocusBack=function(){var e,t=this._getActiveElementIndex();return e=t>0?t-1:this._settings.wrap?this._members.length-1:t,this.focusNodeAtIndex(e),e},i.prototype._handleNonArrowKey=function(e){if(this._settings.stringSearch){if(""!==this._searchString&&(" "===e.key||32===e.keyCode))return e.preventDefault(),-1;if(!o(e.keyCode))return-1;if(e.ctrlKey||e.metaKey||e.altKey)return-1;e.preventDefault(),this._addToSearchString(String.fromCharCode(e.keyCode)),this._runStringSearch()}},i.prototype._clearSearchString=function(){this._searchString=""},i.prototype._addToSearchString=function(e){this._searchString+=e.toLowerCase()},i.prototype._startSearchStringRefreshTimer=function(){var e=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){e._clearSearchString()},this._settings.stringSearchDelay)},i.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},i.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},i.prototype.moveFocusByString=function(e){for(var t,r=0,i=this._members.length;i>r;r++)if(t=this._members[r],t.text&&0===t.text.indexOf(e))return a(t.node)},i.prototype._findIndexOfNode=function(e){for(var t=0,r=this._members.length;r>t;t++)if(this._members[t].node===e)return t;return-1},i.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},i.prototype.focusNodeAtIndex=function(e){var t=this._members[e];return t&&a(t.node),this},i.prototype.addMember=function(e,t){var r=e.node||e,i=e.text||r.getAttribute("data-focus-group-text")||r.textContent||"";this._checkNode(r);var n=i.replace(/[\W_]/g,"").toLowerCase(),e={node:r,text:n};return t?this._members.splice(t,0,e):this._members.push(e),this},i.prototype.removeMember=function(e){var t="number"==typeof e?e:this._findIndexOfNode(e);if(-1!==t)return this._members.splice(t,1),this},i.prototype.clearMembers=function(){return this._members=[],this},i.prototype.setMembers=function(e){this.clearMembers();for(var t=0,r=e.length;r>t;t++)this.addMember(e[t]);return this},i.prototype.getMembers=function(){return this._members},i.prototype._checkNode=function(e){if(!e.nodeType||e.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return e},t.exports=function(e){return new i(e)}},{}]},{},[1])(1)});
